module.exports=function(e){var r={};function t(n){if(r[n])return r[n].exports;var u=r[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,t),u.l=!0,u.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var u in e)t.d(n,u,function(r){return e[r]}.bind(null,u));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=5)}([function(e,r){e.exports=require("@babel/runtime/helpers/interopRequireDefault")},function(e,r){e.exports=require("@babel/runtime/regenerator")},function(e,r){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,r){e.exports=require("@babel/runtime/helpers/interopRequireWildcard")},function(e,r){e.exports=require("deep-equal")},function(e,r,t){t(6)({extensions:[".js",".jsx",".ts",".tsx"],presets:["@babel/preset-env","@babel/preset-typescript"]}),e.exports=t(7)},function(e,r){e.exports=require("@babel/register")},function(e,r,t){"use strict";var n=t(3),u=t(0),a=u(t(1)),s=u(t(2)),o=u(t(8)),i=u(t(9)),c=n(t(10)),f=(0,o.default)();f.use(i.default.urlencoded({extended:!1})),f.use(i.default.json()),f.get("/api/getAllOrders",function(e,r,t){try{r.json(c.getAllOrdersJSON())}catch(e){t(e)}}),f.post("/api/registerOrder",function(){var e=(0,s.default)(a.default.mark(function e(r,t,n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.body.order){e.next=4;break}return e.abrupt("return",t.send({status:"error",message:"missing order information"}));case 4:return e.prev=4,e.next=7,c.registerOrder(r.body.order);case 7:t.status(200).send("Registered Product successfully"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),n(e.t0);case 13:case"end":return e.stop()}},e,null,[[4,10]])}));return function(r,t,n){return e.apply(this,arguments)}}()),f.get("/api/getOrderSummary",function(){var e=(0,s.default)(a.default.mark(function e(r,t,n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=t,e.next=4,c.getOrderSummary();case 4:e.t1=e.sent,e.t0.json.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),n(e.t2);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(r,t,n){return e.apply(this,arguments)}}()),f.post("/api/cancelOrder",function(){var e=(0,s.default)(a.default.mark(function e(r,t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.body.order){e.next=4;break}return e.abrupt("return",t.send({status:"error",message:"missing order information"}));case 4:return e.next=6,c.cancelOrder(r.body.order);case 6:n=e.sent,t.status(200).send(n);case 8:case"end":return e.stop()}},e)}));return function(r,t){return e.apply(this,arguments)}}()),f.listen(9200,function(){return console.log("Example app listening on port ".concat(9200,"!"))})},function(e,r){e.exports=require("express")},function(e,r){e.exports=require("body-parser")},function(e,r,t){"use strict";var n=t(3),u=t(0);Object.defineProperty(r,"__esModule",{value:!0}),r.cancelOrder=r.getOrderSummary=r.generateOrderInventory=r.sortObjKeys=r.registerOrder=r.getAllOrdersJSON=void 0;var a=u(t(1)),s=u(t(11)),o=u(t(2)),i=u(t(4)),c=u(t(12)),f=n(t(13)),d=t(17);r.getAllOrdersJSON=function(){return JSON.stringify(f.readJsonFile())};var l=function(){var e=(0,o.default)(a.default.mark(function e(r){var t,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.readJsonFileAsync();case 2:return t=e.sent,n=[].concat((0,s.default)(t),[r]),e.next=6,f.writeJsonFileAsync(JSON.stringify(n));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}();r.registerOrder=l;var p=function(e,r){return"desc"===r?e.map(function(e){return parseInt(e,10)}).sort(function(e,r){return r-e}).map(function(e){return e.toString()}):e.map(function(e){return parseInt(e,10)}).sort(function(e,r){return e-r}).map(function(e){return e.toString()})};r.sortObjKeys=p;var y=function(e,r,t){return p(Object.keys(e),r).reduce(function(r,n){var u=e[n].map(function(e){return e.quantity}).reduce(function(e,r){return e+r});return[].concat((0,s.default)(r),["".concat(t,":").concat(u,"kg for Â£").concat(n,"[").concat(e[n][0].userId,"]")])},[])};r.generateOrderInventory=y;var b=function(){var e=(0,o.default)(a.default.mark(function e(){var r,t,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.readJsonFileAsync();case 2:return r=e.sent,t=y((0,c.default)(r.filter(function(e){return e.orderType===d.OrderTypes.SELL}),"price"),"asc",d.OrderTypes.SELL),n=y((0,c.default)(r.filter(function(e){return e.orderType===d.OrderTypes.BUY}),"price"),"desc",d.OrderTypes.BUY),e.abrupt("return",[].concat((0,s.default)(t),(0,s.default)(n)));case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();r.getOrderSummary=b;var v=function(){var e=(0,o.default)(a.default.mark(function e(r){var t,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.readJsonFileAsync();case 2:if(t=e.sent,-1===t.findIndex(function(e){return(0,i.default)(e,r)})){e.next=9;break}return n=t.filter(function(e){return!(0,i.default)(e,r)}),e.next=8,f.writeJsonFileAsync(JSON.stringify(n));case 8:return e.abrupt("return","Deleted the order");case 9:return e.abrupt("return","No Order exists");case 10:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}();r.cancelOrder=v},function(e,r){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,r){e.exports=require("lodash.groupby")},function(e,r,t){"use strict";var n=t(0);Object.defineProperty(r,"__esModule",{value:!0}),r.writeJsonFile=r.readJsonFile=r.writeJsonFileAsync=r.readJsonFileAsync=void 0;var u=n(t(1)),a=n(t(2)),s=n(t(14)),o=n(t(15)),i=(t(16),t(4),o.default.promisify(s.default.writeFile)),c=o.default.promisify(s.default.readFile),f=function(){var e=(0,a.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,c("./src/db/orders.json","utf-8");case 3:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();r.readJsonFileAsync=f;var d=function(){var e=(0,a.default)(u.default.mark(function e(r){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i("./src/db/orders.json",r,"utf-8");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}();r.writeJsonFileAsync=d;r.readJsonFile=function(){return JSON.parse(s.default.readFileSync("./src/db/orders.json","utf-8"))};r.writeJsonFile=function(e,r){return s.default.writeFileSync(e,r,"utf-8")}},function(e,r){e.exports=require("fs")},function(e,r){e.exports=require("util")},function(e,r){e.exports=require("path")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OrderTypes=void 0;r.OrderTypes={BUY:"BUY",SELL:"SELL"}}]);